function binarAlphabetSwitch(){const t=$(".alphabet-first"),n=$(".alphabet-second"),d=$(".alphabet-third"),s=$(".alphabet-fourth");shuffleAndShow([["a","01100001"],["b","01100010"],["c","01100011"],["d","01100100"],["e","01100101"],["e","01100101"],["f","01100110"],["g","01100111"],["h","01101000"],["i","01101001"],["j","01101010"],["k","01101011"],["l","01101100"],["m","01101101"]],t),shuffleAndShow([["A","01000001"],["B","01000010"],["C","01000011"],["D","01000100"],["E","01000101"],["E","01000101"],["F","01000110"],["G","01000111"],["H","01001000"],["I","01001001"],["J","01001010"],["K","01001011"],["L","01001100"],["M","01001101"]],n),shuffleAndShow([["n","01101110"],["o","01101111"],["p","01110000"],["q","01110001"],["r","01110010"],["s","01110011"],["t","01110100"],["u","01110101"],["v","01110110"],["v","01110110"],["w","01110111"],["x","01111000"],["y","01111001"],["z","01111010"]],d),shuffleAndShow([["N","01001110"],["O","01001111"],["P","01010000"],["Q","01010001"],["V","01010110"],["V","01010110"],["R","01010010"],["S","01010011"],["T","01010100"],["U","01010101"],["W","01010111"],["X","01011000"],["Y","01011001"],["Z","01011010"]],s)}function loadEnigma(t){const n=$(".block-main");let d;switch(t){case"step-one":d='<div class="container">\n<div class="block-main">\n        <div class="enigma-first">\n            <div class="row">\n                <div class="col">\n                    <table class="table">\n                        <tbody class="alphabet-first">\n                        <tr>\n                            <th scope="row">a</th>\n                            <td>01100001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">b</th>\n                            <td>01100010</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">c</th>\n                            <td>01100011</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">d</th>\n                            <td>01100100</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">e</th>\n                            <td>01100101</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">f</th>\n                            <td>01100110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">g</th>\n                            <td>01100111</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">h</th>\n                            <td>01101000</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">i</th>\n                            <td>01101001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">e</th>\n                            <td>01100101</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">j</th>\n                            <td>01101010</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">k</th>\n                            <td>01101011</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">l</th>\n                            <td>01101100</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">m</th>\n                            <td>01101101</td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <div class="col">\n                    <table class="table">\n                        <tbody class="alphabet-second">\n                        <tr>\n                            <th scope="row">A</th>\n                            <td>01000001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">B</th>\n                            <td>01000010</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">C</th>\n                            <td>01000011</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">D</th>\n                            <td>01000100</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">E</th>\n                            <td>01000101</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">F</th>\n                            <td>01000110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">G</th>\n                            <td>01000111</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">H</th>\n                            <td>01001000</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">I</th>\n                            <td>01001001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">E</th>\n                            <td>01000101</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">J</th>\n                            <td>01001010</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">K</th>\n                            <td>01001011</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">L</th>\n                            <td>01001100</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">M</th>\n                            <td>01001101</td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <div class="col">\n                    <table class="table">\n                        <tbody class="alphabet-third">\n                        <tr>\n                            <th scope="row">n</th>\n                            <td>01101110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">o</th>\n                            <td>01101111</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">p</th>\n                            <td>01110000</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">q</th>\n                            <td>01110001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">v</th>\n                            <td>01110110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">r</th>\n                            <td>01110010</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">s</th>\n                            <td>01110011</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">t</th>\n                            <td>01110100</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">u</th>\n                            <td>01110101</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">v</th>\n                            <td>01110110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">w</th>\n                            <td>01110111</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">x</th>\n                            <td>01111000</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">y</th>\n                            <td>01111001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">z</th>\n                            <td>01111010</td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <div class="col">\n                    <table class="table">\n                        <tbody class="alphabet-fourth">\n                        <tr>\n                            <th scope="row">N</th>\n                            <td>01001110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">O</th>\n                            <td>01001111</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">P</th>\n                            <td>01010000</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Q</th>\n                            <td>01010001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">V</th>\n                            <td>01010110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">R</th>\n                            <td>01010010</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">S</th>\n                            <td>01010011</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">T</th>\n                            <td>01010100</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">U</th>\n                            <td>01010101</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">V</th>\n                            <td>01010110</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">W</th>\n                            <td>01010111</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">X</th>\n                            <td>01011000</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Y</th>\n                            <td>01011001</td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Z</th>\n                            <td>01011010</td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            <div class="row justify-content-lg-center">\n                <div class="col-lg-5 col-lg-push-3">\n                    <div class="form-group">\n                        <input type="text" class="alphabet-entry form-control" placeholder="Entre le mot décodé">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="infos"></div>\n    </div>\n<div class="steps">\n        <div class="row">\n            <div class="col">\n                <div class="step step-first pending">\n                    <span class="active" data-enigma="first">1</span>\n                </div>\n            </div>\n            <div class="col">\n                <div class="step step-second">\n                    <span data-enigma="second">2</span>\n                </div>\n            </div>\n            <div class="col">\n                <div class="step step-third">\n                    <span data-enigma="third">3</span>\n                </div>\n            </div>\n            <div class="col">\n                <div class="step step-fourth">\n                    <span data-enigma="fourth">4</span>\n                </div>\n            </div>\n            <div class="col">\n                <div class="step step-fifth">\n                    <span data-enigma="fifth">5</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>',$(".block-home").remove(),$("body").prepend(d).addClass("enigma"),$(".steps").show();let p=setInterval(binarAlphabetSwitch,1e4);$(".alphabet-entry").on("keyup",function(){if("server"===this.value){clearInterval(p),$(".enigma-first").hide();let t='<div class="alert alert-info" role="alert">\nBien joué t\'as trouvé le code !\n</div>\n<button type="button" class="btn btn-outline-info next-enigma" data-from="step-first" data-to="step-second">Énigme suivante</button>';$(".block-main .infos").append(t)}});break;case"step-second":d='<div class="enigma-second">\n                <table class="table text-center">\n                    <tbody id="sortable">\n                    <tr class="ui-state-default" data-pos="2">\n                        <td>O</td>\n                        <td>P</td>\n                        <td class="third">T</td>\n                        <td class="clue">I</td>\n                        <td>O</td>\n                        <td>N</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="5">\n                        <td>A</td>\n                        <td>R</td>\n                        <td class="third">N</td>\n                        <td class="clue">A</td>\n                        <td>Q</td>\n                        <td>U</td>\n                        <td>E</td>\n                        <td>U</td>\n                        <td>R</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="0">\n                        <td>W</td>\n                        <td>I</td>\n                        <td class="third">K</td>\n                        <td>I</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="3">\n                        <td>P</td>\n                        <td>U</td>\n                        <td class="third">L</td>\n                        <td class="clue">S</td>\n                        <td>E</td>\n                        <td>U</td>\n                        <td>R</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="1">\n                        <td>D</td>\n                        <td>R</td>\n                        <td class="third clue">O</td>\n                        <td class="clue">N</td>\n                        <td class="clue">E</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="4">\n                        <td>B</td>\n                        <td>R</td>\n                        <td class="third">I</td>\n                        <td class="clue">G</td>\n                        <td>A</td>\n                        <td>N</td>\n                        <td>D</td>\n                        <td>E</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>',n.prepend(d);const v=n.find("#sortable");v.sortable({stop:function(t,n){const d=$.map($(this).find("tr"),function(t){return $(t).data("pos")+" "+$(t).index()}),s=d.length;let e=0;d.forEach(function(t){if(t[0]===t[2]&&e++,e===s){$("td.third").addClass("highlight");let t='<button type="button" class="btn btn-outline-info next-enigma" data-from="step-second" data-to="step-third">Énigme suivante</button>';$(".block-main .infos").append(t)}})}}),v.disableSelection();break;case"step-third":$(".enigma-second").hide(),d='<div class="enigma-third">\n<div class="sketchfab-embed-wrapper">\n                <iframe src="https://sketchfab.com/models/4a67c586c580419782647a39be419b68/embed" frameborder="0" allow="autoplay; fullscreen; vr" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n            </div>\n</div>',n.prepend(d),d='<button type="button" class="btn btn-outline-info next-enigma" data-from="step-third" data-to="step-fourth">Énigme suivante</button>',$(".block-main .infos").append(d);break;case"step-fourth":$(".enigma-third").hide(),d='<div class="enigma-fourth">\n                <div class="row justify-content-center">\n                    <div class="col col-lg-6 text-center">\n                        <img src="./assets/img/Enigme_4.png" draggable="false">\n                    </div>\n                </div>\n            </div>',n.prepend(d),setTimeout(function(){d='<div class="col col-lg-6 text-center">\n<img src="./assets/img/Enigme_4_indice_2.png">\n</div>',$(".enigma-fourth .row").append(d),d='<button type="button" class="btn btn-outline-info next-enigma" data-from="step-fourth" data-to="step-fifth">Énigme suivante</button>',$(".block-main .infos").append(d)},2e4);break;case"step-fifth":$(".enigma-fourth").hide(),d='<div class="enigma-fifth">\n                <div class="row">\n                    <div class="col">\n                        <div class="info">\n                            <p>Des lettres se sont cachées dans toutes les épreuves précédentes,<br>vous devez les retrouver pour terminer...</p>\n                            <p class="hidden">Press any button to hack<span class="blink">_</span></p>\n                            <div id="bip" class="display"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col text-center">\n                        <div class="password hidden"></div>\n                        <div class="button start">DÉMARRER !</div>\n                        <div class="blink granted hidden">ACCÈS AUTORISÉ !</div>\n                        <div class="blink denied hidden">ACCÈS REFUSÉ !</div>\n                        <div class="failed hidden">VOUS AVEZ ÉCHOUÉ</div>\n                    </div>\n                </div>\n            </div>',n.prepend(d);var s="evtgu",e=0,a=300,o=null;function r(t=1){if((a-=t)<=0)clearInterval(o),clearInterval(c),$(".failed").removeClass("hidden"),$(".password").addClass("hidden"),$("#bip").addClass("hidden");else{let t=a>60?Math.floor(a/60)+" min ":"";document.getElementById("bip").innerHTML=t+a%60+" sec restantes"}};var i,c=setInterval(()=>{let t=s.slice(0,e);t+=Math.random().toString(36).slice(2,s.length-e+2),console.log(s.length-e),$(".password").text(t)},25);function l(){$(".denied").addClass("hidden")}function h(){r(10),$(".denied").removeClass("hidden"),e=0,window.clearTimeout(i),i=window.setTimeout(l,2e3)};$(window).on("keypress",function(t){String.fromCharCode(t.which)===s[e]?++e===s.length&&$(".granted, .rerun").removeClass("hidden"):h()}),$(document).on("click",".start",function(){$(this).addClass("hidden"),$(".info p:last-child, .password").removeClass("hidden"),o=setInterval(r,1e3)})}}function shuffle(t){for(let n=t.length-1;n>0;n--){const d=Math.floor(Math.random()*(n+1));[t[n],t[d]]=[t[d],t[n]]}return t}function shuffleAndShow(t,n){const d=shuffle(t);n.html(""),d.forEach(function(t){let d="<tr>\n"+`<th scope="row">${t[0]}</th>\n`+`<td>${t[1]}</td>\n`+"</tr>";n.append(d)})}function stepsNav(t,n,d){d.removeClass("active").addClass("pending"),$(".block-main .enigma-"+t).hide(),$(".block-main .enigma-"+n).show()}$(document).ready(function(){$(document).on("click",".enter",function(){loadEnigma("step-one")}),$(document).on("click",".next-enigma",function(){const t=$(this).data("from"),n=$(this).data("to");$(".steps .step span").removeClass("active"),$(".steps ."+t).removeClass("pending"),$(".steps ."+t+" span").addClass("completed"),$(".steps ."+n).addClass("pending"),$(".steps ."+n+" span").addClass("active"),$(".block-main .infos").html(""),loadEnigma(n)}),$(document).on("click",".step span",function(){const t=$(this).data("enigma"),n=$(".steps .step").find("span.active"),d=n.data("enigma");if($(this).hasClass("completed")){const s=$(".step-"+d);stepsNav(d,t,n),s.find("span").hasClass("completed")||s.addClass("pending"),$(this).addClass("active")}else $(this).hasClass("pending")&&(stepsNav(d,t,n),$(this).removeClass("pending").addClass("active"))})});