function binarAlphabetSwitch(){const t=$(".alphabet-first"),n=$(".alphabet-second"),e=$(".alphabet-third"),s=$(".alphabet-fourth");shuffleAndShow([["a","01100001"],["b","01100010"],["c","01100011"],["d","01100100"],["e","01100101"],["e","01100101"],["f","01100110"],["g","01100111"],["h","01101000"],["i","01101001"],["j","01101010"],["k","01101011"],["l","01101100"],["m","01101101"]],t),shuffleAndShow([["A","01000001"],["B","01000010"],["C","01000011"],["D","01000100"],["E","01000101"],["E","01000101"],["F","01000110"],["G","01000111"],["H","01001000"],["I","01001001"],["J","01001010"],["K","01001011"],["L","01001100"],["M","01001101"]],n),shuffleAndShow([["n","01101110"],["o","01101111"],["p","01110000"],["q","01110001"],["r","01110010"],["s","01110011"],["t","01110100"],["u","01110101"],["v","01110110"],["v","01110110"],["w","01110111"],["x","01111000"],["y","01111001"],["z","01111010"]],e),shuffleAndShow([["N","01001110"],["O","01001111"],["P","01010000"],["Q","01010001"],["V","01010110"],["V","01010110"],["R","01010010"],["S","01010011"],["T","01010100"],["U","01010101"],["W","01010111"],["X","01011000"],["Y","01011001"],["Z","01011010"]],s)}function loadEnigma(t){const n=$(".block-main");let e;switch(t){case"step-second":e='<div class="enigma-second">\n                <table class="table text-center">\n                    <tbody id="sortable">\n                    <tr class="ui-state-default" data-pos="2">\n                        <td>O</td>\n                        <td>P</td>\n                        <td class="third">T</td>\n                        <td class="clue">I</td>\n                        <td>O</td>\n                        <td>N</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="5">\n                        <td>A</td>\n                        <td>R</td>\n                        <td class="third">N</td>\n                        <td class="clue">A</td>\n                        <td>Q</td>\n                        <td>U</td>\n                        <td>E</td>\n                        <td>U</td>\n                        <td>R</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="0">\n                        <td>W</td>\n                        <td>I</td>\n                        <td class="third">K</td>\n                        <td>I</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="3">\n                        <td>P</td>\n                        <td>U</td>\n                        <td class="third">L</td>\n                        <td class="clue">S</td>\n                        <td>E</td>\n                        <td>U</td>\n                        <td>R</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="1">\n                        <td>D</td>\n                        <td>R</td>\n                        <td class="third clue">O</td>\n                        <td class="clue">N</td>\n                        <td class="clue">E</td>\n                    </tr>\n                    <tr class="ui-state-default" data-pos="4">\n                        <td>B</td>\n                        <td>R</td>\n                        <td class="third">I</td>\n                        <td class="clue">G</td>\n                        <td>A</td>\n                        <td>N</td>\n                        <td>D</td>\n                        <td>E</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>',n.prepend(e);const f=n.find("#sortable");f.sortable({stop:function(t,n){const e=$.map($(this).find("tr"),function(t){return $(t).data("pos")+" "+$(t).index()}),s=e.length;let d=0;e.forEach(function(t){if(t[0]===t[2]&&d++,d===s){$("td.third").addClass("highlight");let t='<button type="button" class="btn btn-outline-info next-enigma" data-from="step-second" data-to="step-third">Énigme suivante</button>';$(".block-main .infos").append(t)}})}}),f.disableSelection();break;case"step-third":$(".enigma-second").hide(),e='<div class="enigma-third">\n<div class="sketchfab-embed-wrapper">\n                <iframe src="https://sketchfab.com/models/b9f9983dd3024dc09a1bf95f7f84f88f/embed" frameborder="0" allow="autoplay; fullscreen; vr" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>\n            </div>\n</div>',n.prepend(e),e='<button type="button" class="btn btn-outline-info next-enigma" data-from="step-third" data-to="step-fourth">Énigme suivante</button>',$(".block-main .infos").append(e);break;case"step-fourth":$(".enigma-third").hide(),e='<div class="enigma-fourth">\n                <div class="row justify-content-center">\n                    <div class="col col-lg-6 text-center">\n                        <img src="./assets/img/Enigme_4.png" draggable="false">\n                    </div>\n                </div>\n            </div>',n.prepend(e),setTimeout(function(){e='<div class="col col-lg-6 text-center">\n<img src="./assets/img/Enigme_4_indice_2.png">\n</div>',$(".enigma-fourth .row").append(e),e='<button type="button" class="btn btn-outline-info next-enigma" data-from="step-fourth" data-to="step-fifth">Énigme suivante</button>',$(".block-main .infos").append(e)},2e4);break;case"step-fifth":$(".enigma-fourth").hide(),e='<div class="enigma-fifth">\n                <div class="row">\n                    <div class="col">\n                        <div class="info">\n                            <p>Des lettres se sont cachées dans toutes les épreuves précédentes,<br>vous devez les retrouver pour terminer...</p>\n                            <p class="hidden">Press any button to hack<span class="blink">_</span></p>\n                            <div id="bip" class="display"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col text-center">\n                        <div class="password hidden"></div>\n                        <div class="button start">DÉMARRER !</div>\n                        <div class="blink granted hidden">ACCÈS AUTORISÉ !</div>\n                        <div class="blink denied hidden">ACCÈS REFUSÉ !</div>\n                        <div class="failed hidden">VOUS AVEZ ÉCHOUÉ</div>\n                    </div>\n                </div>\n            </div>',n.prepend(e);var s="evtgu",d=0,a=300,i=null;function l(t=1){if((a-=t)<=0)clearInterval(i),clearInterval(c),$(".failed").removeClass("hidden"),$(".password").addClass("hidden"),$("#bip").addClass("hidden");else{let t=a>60?Math.floor(a/60)+" min ":"";document.getElementById("bip").innerHTML=t+a%60+" sec restantes"}};var o,c=setInterval(()=>{let t=s.slice(0,d);t+=Math.random().toString(36).slice(2,s.length-d+2),console.log(s.length-d),$(".password").text(t)},25);function r(){$(".denied").addClass("hidden")}function p(){l(10),$(".denied").removeClass("hidden"),d=0,window.clearTimeout(o),o=window.setTimeout(r,2e3)};$(window).on("keypress",function(t){String.fromCharCode(t.which)===s[d]?++d===s.length&&$(".granted, .rerun").removeClass("hidden"):p()}),$(document).on("click",".start",function(){$(this).addClass("hidden"),$(".info p:last-child, .password").removeClass("hidden"),i=setInterval(l,1e3)})}}function shuffle(t){for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t}function shuffleAndShow(t,n){const e=shuffle(t);n.html(""),e.forEach(function(t){let e="<tr>\n"+`<th scope="row">${t[0]}</th>\n`+`<td>${t[1]}</td>\n`+"</tr>";n.append(e)})}function stepsNav(t,n,e){e.removeClass("active").addClass("pending"),$(".block-main .enigma-"+t).hide(),$(".block-main .enigma-"+n).show()}$(document).ready(function(){let t=setInterval(binarAlphabetSwitch,1e4);$(".alphabet-entry").on("keyup",function(){if("server"===this.value){clearInterval(t),$(".enigma-first").hide();let n='<div class="alert alert-info" role="alert">\nBien joué t\'as trouvé le code !\n</div>\n<button type="button" class="btn btn-outline-info next-enigma" data-from="step-first" data-to="step-second">Énigme suivante</button>';$(".block-main .infos").append(n)}}),$(document).on("click",".next-enigma",function(){const t=$(this).data("from"),n=$(this).data("to");$(".steps .step span").removeClass("active"),$(".steps ."+t).removeClass("pending"),$(".steps ."+t+" span").addClass("completed"),$(".steps ."+n).addClass("pending"),$(".steps ."+n+" span").addClass("active"),$(".block-main .infos").html(""),loadEnigma(n)}),$(document).on("click",".step span",function(){const t=$(this).data("enigma"),n=$(".steps .step").find("span.active"),e=n.data("enigma");if($(this).hasClass("completed")){const s=$(".step-"+e);stepsNav(e,t,n),s.find("span").hasClass("completed")||s.addClass("pending"),$(this).addClass("active")}else $(this).hasClass("pending")&&(stepsNav(e,t,n),$(this).removeClass("pending").addClass("active"))})});